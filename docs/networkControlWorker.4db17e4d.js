parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"tCNg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.feature=n,exports.geometry=i,exports.point=s,exports.points=a,exports.polygon=u,exports.polygons=l,exports.lineString=c,exports.lineStrings=m,exports.featureCollection=d,exports.multiLineString=f,exports.multiPoint=p,exports.multiPolygon=h,exports.geometryCollection=v,exports.round=g,exports.radiansToLength=x,exports.lengthToRadians=w,exports.lengthToDegrees=b,exports.bearingToAzimuth=y,exports.radiansToDegrees=E,exports.degreesToRadians=P,exports.convertLength=M,exports.convertArea=k,exports.isNumber=A,exports.isObject=L,exports.validateBBox=F,exports.validateId=S,exports.areaFactors=exports.unitsFactors=exports.factors=exports.earthRadius=void 0;var r=6371008.8;exports.earthRadius=r;var e={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:r/1.0936};exports.factors=e;var t={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1/1.0936};exports.unitsFactors=t;var o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function n(r,e,t){void 0===t&&(t={});var o={type:"Feature"};return(0===t.id||t.id)&&(o.id=t.id),t.bbox&&(o.bbox=t.bbox),o.properties=e||{},o.geometry=r,o}function i(r,e,t){switch(void 0===t&&(t={}),r){case"Point":return s(e).geometry;case"LineString":return c(e).geometry;case"Polygon":return u(e).geometry;case"MultiPoint":return p(e).geometry;case"MultiLineString":return f(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(r+" is invalid")}}function s(r,e,t){if(void 0===t&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(r[0])||!A(r[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:r},e,t)}function a(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return s(r,e)}),t)}function u(r,e,t){void 0===t&&(t={});for(var o=0,i=r;o<i.length;o++){var s=i[o];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:r},e,t)}function l(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return u(r,e)}),t)}function c(r,e,t){if(void 0===t&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:r},e,t)}function m(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return c(r,e)}),t)}function d(r,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function f(r,e,t){return void 0===t&&(t={}),n({type:"MultiLineString",coordinates:r},e,t)}function p(r,e,t){return void 0===t&&(t={}),n({type:"MultiPoint",coordinates:r},e,t)}function h(r,e,t){return void 0===t&&(t={}),n({type:"MultiPolygon",coordinates:r},e,t)}function v(r,e,t){return void 0===t&&(t={}),n({type:"GeometryCollection",geometries:r},e,t)}function g(r,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function x(r,t){void 0===t&&(t="kilometers");var o=e[t];if(!o)throw new Error(t+" units is invalid");return r*o}function w(r,t){void 0===t&&(t="kilometers");var o=e[t];if(!o)throw new Error(t+" units is invalid");return r/o}function b(r,e){return E(w(r,e))}function y(r){var e=r%360;return e<0&&(e+=360),e}function E(r){return 180*(r%(2*Math.PI))/Math.PI}function P(r){return r%360*Math.PI/180}function M(r,e,t){if(void 0===e&&(e="kilometers"),void 0===t&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return x(w(r,e),t)}function k(r,e,t){if(void 0===e&&(e="meters"),void 0===t&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=o[e];if(!n)throw new Error("invalid original units");var i=o[t];if(!i)throw new Error("invalid final units");return r/n*i}function A(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)}function L(r){return!!r&&r.constructor===Object}function F(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!A(r))throw new Error("bbox must only contain numbers")})}function S(r){if(!r)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string")}exports.areaFactors=o;
},{}],"lxYn":[function(require,module,exports) {
"use strict";var e=r(require("@turf/helpers"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}return a.default=e,r&&r.set(e,a),a}var a={type:"FeatureCollection",features:[]},o={type:"FeatureCollection",features:[]},n=[],s=[],u={type:"FeatureCollection",name:"networkTree",features:[]},i=Date.now();function c(e){return e.reduce((e,t)=>[...e,...t],[])}function l(t,r,a){let o=a;var n=[];"upstream"===o||"downstream"===o?t.features.map(function(e,t){var r=e.geometry.coordinates[0][0].length?c(e.geometry.coordinates):e.geometry.coordinates,a="upstream"===o?0:r.length-1;n.push(r[a])}):t.features.map(function(e){for(var t=e.geometry.coordinates[0][0].length?c(e.geometry.coordinates):e.geometry.coordinates,r=0;r<t.length;r++)n.push(e.geometry.coordinates[r])});var s={type:"FeatureCollection",features:[]};for(let i=0;i<n.length;i++){f(e.point(n[i]),r,o).features.map(e=>{s.features.push(e),u.features.push(e)})}s.features.length>0?l(s,r,o):(console.warn("worker network trace took",Date.now()-i,"ms"),self.postMessage(u))}function f(t,r,a,o){var u=(t=t).geometry.coordinates;let i=a||t.name;for(var c=[],l=0;l<r.features.length;l++)if(!n[l]){var f=r.features[l],p=!1;if(f.geometry.coordinates.map(e=>{u[0]==e[0]&&u[1]==e[1]&&(p=!0)}),p){var d="upstream"===i||"upstream-laterals"===i?0:f.geometry.coordinates.length-1,g=f.geometry.coordinates[d];u[0]==g[0]&&u[1]==g[1]||(n[l]=1,c.push(f),s[o]?s[o].up=[l,...new Set(s[o].up)]:s[o]={up:[l]})}}return e.featureCollection(c)}function p(e,t,r){function a(e){return e.map(function(e,a){return a<2?1*e.toFixed(t):1*e.toFixed(r)})}function o(e){return e.map(a)}function n(e){return e.map(o)}function s(e){if(!e)return{};switch(e.type){case"Point":return e.coordinates=a(e.coordinates),e;case"LineString":case"MultiPoint":return e.coordinates=o(e.coordinates),e;case"Polygon":case"MultiLineString":return e.coordinates=n(e.coordinates),e;case"MultiPolygon":return e.coordinates=e.coordinates.map(n),e;case"GeometryCollection":return e.geometries=e.geometries.map(s),e;default:return{}}}function u(e){return e.geometry=s(e.geometry),e}if(!e)return e;switch(e.type){case"Feature":return u(e);case"GeometryCollection":return(c=e).geometries=c.geometries.map(s),c;case"FeatureCollection":return(i=e).features=i.features.map(u),i;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiPolygon":case"MultiLineString":return s(e);default:return e}var i,c}self.addEventListener("message",function(t){if(t.data.features&&"network"===t.data.name){a.features=t.data.features.slice();var r=e.featureCollection([]);a.features.map(t=>{t.geometry.coordinates[0][0].length?t.geometry.coordinates.map(t=>{r.features.push(e.lineString(p(t,8)))}):r.features.push(p(t,8))}),a.features=r.features.slice();a.features.reduce((e,t)=>("LineString"!=t.geometry.type&&(error=!0),[...e,t.geometry.type]),[]),console.log("all geometries are linestrings, the tool should work"),this.console.log("worker added",a.features.length,"features to the master linear network ")}if(t.data.features&&"pointNetwork"===t.data.name&&(o.features=t.data.features.slice(),this.console.log("worker added",o.features.length,"features to the master point network ")),!t.data.features&&t.data.geometry&&"Point"===t.data.geometry.type){console.log("received network trace request",t.data),i=Date.now(),u.features=[],n=new Array(a.features.length),(s=new Array(a.features.length))[t.data.properties.index]={up:[t.data.properties.index]};var c=t.data.properties.index,d=f(t.data,a,null,c);u.features=d.features.slice(0),l(d,a,t.data.name)}},!1);
},{"@turf/helpers":"tCNg"}]},{},["lxYn"], null)
//# sourceMappingURL=/geojson-network-control/networkControlWorker.4db17e4d.js.map